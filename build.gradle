plugins {
    id 'java'
}

subprojects {
    apply plugin: "java"

    sourceCompatibility = JavaVersion.VERSION_1_8
    targetCompatibility = JavaVersion.VERSION_1_8

    compileJava.options.encoding = "UTF-8"

    archivesBaseName = project.archives_base_name
    group = project.maven_group
    version = project.mod_version

    configurations {
        libs

        implementation.extendsFrom libs
    }

    jar {
        from {
            duplicatesStrategy = DuplicatesStrategy.EXCLUDE
            configurations.libs.collect {
                it.isDirectory() ? it : zipTree(it)
            }
        }

        if (it.project.name != "Shared") {
            from ("LICENSE") {
                rename { "${it}_${project.archivesBaseName}" }
            }
        }
    }

    java {
        withSourcesJar()
    }
}
